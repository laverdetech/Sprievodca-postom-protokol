<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sprievodca Pôstom | Interaktívna Analýza</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        html {
            scroll-padding-top: 80px; /* Offset for fixed navbar */
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0e172b;
            color: #ffffff;
        }
        .glass-effect {
            background: rgba(30, 40, 58, 0.75);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(56, 188, 248, 0.1);
        }
        .highlight-text {
            color: #38bcf8;
        }
        .bg-accent {
            background-color: #38bcf8;
        }
        .border-accent {
            border-color: #38bcf8;
        }
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        /* Custom slider styles */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            background: transparent;
        }
        input[type=range]:focus {
            outline: none;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 8px; /* Zväčšená výška pre lepšiu viditeľnosť */
            cursor: pointer;
            background: #2a384e; /* Mierne svetlejšie pozadie */
            border-radius: 5px;
            border: 1px solid rgba(56, 188, 248, 0.5); /* Jemný okraj vo farbe zvýraznenia */
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 24px;
            width: 24px;
            border-radius: 50%;
            background: #38bcf8;
            cursor: pointer;
            margin-top: -8px; /* Upravená pozícia pre centrovanie na novej lište */
            border: 4px solid #0e172b;
        }
        input[type=range]::-moz-range-track {
            width: 100%;
            height: 8px; /* Zväčšená výška pre lepšiu viditeľnosť */
            cursor: pointer;
            background: #2a384e; /* Mierne svetlejšie pozadie */
            border-radius: 5px;
            border: 1px solid rgba(56, 188, 248, 0.5); /* Jemný okraj vo farbe zvýraznenia */
        }
        input[type=range]::-moz-range-thumb {
            height: 24px;
            width: 24px;
            border-radius: 50%;
            background: #38bcf8;
            cursor: pointer;
            border: 4px solid #0e172b;
        }
        /* Modal Styles */
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(14, 23, 43, 0.8);
            backdrop-filter: blur(5px);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            z-index: 50;
        }
        .modal-backdrop.visible {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.95);
            opacity: 0;
            visibility: hidden;
            transition: transform 0.3s ease, opacity 0.3s ease, visibility 0.3s ease;
            z-index: 100;
        }
        .modal-content.visible {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
            visibility: visible;
        }
        body.modal-open {
            overflow: hidden;
        }
    </style>
</head>
<body class="scroll-smooth">

    <!-- Navigation Menu -->
    <nav class="sticky top-0 z-40 w-full glass-effect">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="text-xl font-bold highlight-text">Sprievodca Pôstom</a>
            
            <!-- Desktop Menu -->
            <ul class="hidden md:flex space-x-8 text-sm font-medium text-gray-300">
                <li><a href="#metabolicka-cesta" class="hover:highlight-text transition-colors duration-300">Metabolická Cesta</a></li>
                <li><a href="#vizualizacia" class="hover:highlight-text transition-colors duration-300">Vizualizácie</a></li>
                <li><a href="#protocols" class="hover:highlight-text transition-colors duration-300">Protokoly</a></li>
                <li><a href="#prirucka" class="hover:highlight-text transition-colors duration-300">Príručka</a></li>
            </ul>

            <!-- Mobile Menu Button -->
            <button id="mobile-menu-button" class="md:hidden p-2 rounded-md text-gray-300 hover:bg-[#1e283a]">
                <svg id="menu-open-icon" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
                 <svg id="menu-close-icon" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden border-t border-transparent">
            <ul class="flex flex-col items-center text-center space-y-4 py-4 text-gray-300">
                <li><a href="#metabolicka-cesta" class="block py-2">Metabolická Cesta</a></li>
                <li><a href="#vizualizacia" class="block py-2">Vizualizácie</a></li>
                <li><a href="#protocols" class="block py-2">Protokoly</a></li>
                <li><a href="#prirucka" class="block py-2">Príručka</a></li>
            </ul>
        </div>
    </nav>


    <!-- Header -->
    <header class="container mx-auto px-6 py-12 text-center fade-in">
        <h1 class="text-4xl md:text-6xl font-bold mb-4">
            Sprievodca Svetom <span class="highlight-text">Pôstu</span>
        </h1>
        <p class="text-lg md:text-xl text-gray-300 max-w-3xl mx-auto">
            Objavte silu metabolickej flexibility a bunkovej obnovy. Interaktívny prehľad pôstnych protokolov od 12 do 72 hodín, založený na vedeckých poznatkoch.
        </p>
    </header>

    <main class="container mx-auto px-6">

        <!-- Sekcia Metabolická Cesta -->
        <section id="metabolicka-cesta" class="my-16 fade-in">
            <h2 class="text-3xl font-bold text-center mb-10">Metabolická Cesta Telom Počas Pôstu</h2>
            <div class="relative w-full max-w-5xl mx-auto">
                <!-- Timeline Line -->
                <div class="absolute left-4 top-4 bottom-4 w-1 bg-[#1e283a] rounded-full"></div>
                
                <!-- Timeline Items -->
                <div class="space-y-12">
                    <!-- 0-12 Hodín -->
                    <div class="relative flex items-center">
                        <div class="w-full ml-12">
                            <div class="bg-[#1e283a] p-6 rounded-xl shadow-lg border border-transparent hover:border-accent transition-all duration-300">
                                <p class="text-sm font-semibold highlight-text mb-1">0-12 Hodín</p>
                                <h3 class="text-xl font-bold mb-2">Prechod do Katabolizmu</h3>
                                <p class="text-gray-300 text-sm">Telo spotrebúva glukózu z posledného jedla. Hladina inzulínu klesá, čo je signál pre telo, aby začalo siahať po uložených zásobách energie.</p>
                            </div>
                        </div>
                        <div class="absolute left-4 w-8 h-8 bg-[#0e172b] border-4 border-accent rounded-full flex items-center justify-center">
                            <div class="w-2 h-2 bg-accent rounded-full"></div>
                        </div>
                    </div>
                    <!-- 12-24 Hodín -->
                    <div class="relative flex items-center">
                        <div class="w-full ml-12">
                             <div class="bg-[#1e283a] p-6 rounded-xl shadow-lg border border-transparent hover:border-accent transition-all duration-300">
                                <p class="text-sm font-semibold highlight-text mb-1">12-24 Hodín</p>
                                <h3 class="text-xl font-bold mb-2">Metabolický Prepínač</h3>
                                <p class="text-gray-300 text-sm">Zásoby glykogénu sa vyčerpávajú. Telo začína produkovať ketóny ako alternatívne palivo a spúšťa sa proces autofágie - bunkového čistenia.</p>
                            </div>
                        </div>
                        <div class="absolute left-4 w-8 h-8 bg-[#0e172b] border-4 border-accent rounded-full flex items-center justify-center">
                            <div class="w-2 h-2 bg-accent rounded-full"></div>
                        </div>
                    </div>
                    <!-- 24-48 Hodín -->
                    <div class="relative flex items-center">
                        <div class="w-full ml-12">
                             <div class="bg-[#1e283a] p-6 rounded-xl shadow-lg border border-transparent hover:border-accent transition-all duration-300">
                                <p class="text-sm font-semibold highlight-text mb-1">24-48 Hodín</p>
                                <h3 class="text-xl font-bold mb-2">Hlboký Pôst</h3>
                                <p class="text-gray-300 text-sm">Telo je v hlbokej ketóze. Výrazne stúpa hladina rastového hormónu (HGH) a maximalizuje sa autofágia, čo vedie k intenzívnej bunkovej oprave.</p>
                            </div>
                        </div>
                        <div class="absolute left-4 w-8 h-8 bg-[#0e172b] border-4 border-accent rounded-full flex items-center justify-center">
                            <div class="w-2 h-2 bg-accent rounded-full"></div>
                        </div>
                    </div>
                    <!-- 48-72 Hodín -->
                    <div class="relative flex items-center">
                        <div class="w-full ml-12">
                             <div class="bg-[#1e283a] p-6 rounded-xl shadow-lg border border-transparent hover:border-accent transition-all duration-300">
                                <p class="text-sm font-semibold highlight-text mb-1">48-72 Hodín</p>
                                <h3 class="text-xl font-bold mb-2">Systémový Reset</h3>
                                <p class="text-gray-300 text-sm">Dochádza k regenerácii imunitných buniek a kmeňových buniek. Toto štádium ponúka hĺbkové benefity, no vyžaduje si skúsenosti a opatrnosť.</p>
                            </div>
                        </div>
                        <div class="absolute left-4 w-8 h-8 bg-[#0e172b] border-4 border-accent rounded-full flex items-center justify-center">
                            <div class="w-2 h-2 bg-accent rounded-full"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sekcia Vizualizácie -->
        <section id="vizualizacia" class="my-24 fade-in">
             <div class="bg-[#1e283a] p-6 md:p-8 rounded-2xl shadow-lg">
                <h2 class="text-3xl font-bold text-center mb-4">Vizualizácia Priebehu Pôstu</h2>
                <p class="text-center text-gray-400 mb-10">Posuňte a sledujte, ako sa menia kľúčové ukazovatele v priebehu 72 hodín.</p>
                
                <!-- Slider -->
                <div class="mb-8">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-gray-400 text-sm">Začiatok Pôstu</span>
                        <span id="slider-value" class="text-xl font-bold highlight-text">0 hodín</span>
                        <span class="text-gray-400 text-sm">72 hodín</span>
                    </div>
                    <input type="range" id="hour-slider" min="0" max="72" value="0" step="1">
                </div>

                <!-- Value Cards -->
                <div class="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-8">
                    <div class="bg-[#0e172b] p-4 rounded-lg text-center">
                        <p class="text-sm text-gray-400">Inzulín / Glukóza</p>
                        <p id="insulin-value" class="text-2xl font-bold">Vysoká</p>
                    </div>
                     <div class="bg-[#0e172b] p-4 rounded-lg text-center">
                        <p class="text-sm text-gray-400">Ketóny</p>
                        <p id="ketones-value" class="text-2xl font-bold">Nízka</p>
                    </div>
                     <div class="bg-[#0e172b] p-4 rounded-lg text-center">
                        <p class="text-sm text-gray-400">Autofágia</p>
                        <p id="autophagy-value" class="text-2xl font-bold">Minimálna</p>
                    </div>
                     <div class="bg-[#0e172b] p-4 rounded-lg text-center">
                        <p class="text-sm text-gray-400">Rastový Hormón</p>
                        <p id="hgh-value" class="text-2xl font-bold">Normálna</p>
                    </div>
                    <div class="bg-[#0e172b] p-4 rounded-lg text-center">
                        <p class="text-sm text-gray-400">Kortizol (Stres)</p>
                        <p id="cortisol-value" class="text-2xl font-bold">Normálna</p>
                    </div>
                    <div class="bg-[#0e172b] p-4 rounded-lg text-center">
                        <p class="text-sm text-gray-400">Spaľovanie Tukov</p>
                        <p id="fat-burning-value" class="text-2xl font-bold">Nízke</p>
                    </div>
                </div>

                <!-- Chart -->
                <div class="relative h-64 md:h-96">
                    <canvas id="fastingChart"></canvas>
                </div>
            </div>

            <!-- Circadian Chart Section -->
            <div class="bg-[#1e283a] p-6 md:p-8 rounded-2xl shadow-lg mt-12">
                <h2 class="text-3xl font-bold text-center mb-4">Zosúladenie s Cirkadiánnym Rytmom</h2>
                <p class="text-center text-gray-400 mb-4 max-w-3xl mx-auto">Naše telo funguje lepšie, keď jeme v súlade s jeho vnútornými hodinami. Inzulínová citlivosť je najvyššia ráno, zatiaľ čo večer stúpa hladina spánkového hormónu melatonínu.</p>
                <p class="text-center text-gray-300 mb-10 max-w-3xl mx-auto font-semibold">Skúste si nastaviť jedálenské okno do <span class="text-yellow-400">optimálnej zóny</span> a vyhnúť sa jedlu v <span class="text-red-500">menej optimálnej večernej zóne</span>.</p>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-center">
                    <div class="lg:col-span-1 space-y-6">
                        <div>
                            <div class="flex justify-between items-center mb-2">
                                <label for="start-time-slider" class="font-semibold">Začiatok jedla</label>
                                <span id="start-time-label" class="text-lg font-bold highlight-text">08:00</span>
                            </div>
                            <input type="range" id="start-time-slider" min="0" max="23" value="8" step="1">
                        </div>
                         <div>
                            <div class="flex justify-between items-center mb-2">
                                <label for="end-time-slider" class="font-semibold">Koniec jedla</label>
                                <span id="end-time-label" class="text-lg font-bold highlight-text">16:00</span>
                            </div>
                            <input type="range" id="end-time-slider" min="0" max="23" value="16" step="1">
                        </div>
                        <div class="bg-[#0e172b] p-4 rounded-lg text-center">
                            <p class="text-sm text-gray-400">Dĺžka jedálenského okna</p>
                            <p id="eating-window-duration" class="text-2xl font-bold">8 hodín</p>
                        </div>
                    </div>
                    <div class="lg:col-span-2">
                         <div class="w-full relative pt-12">
                            <!-- Icons above the bar -->
                            <div class="flex justify-between px-2 text-gray-400 absolute w-full top-0 text-2xl">
                                <div class="opacity-50">🌙</div>
                                <div class="opacity-90">☀️</div>
                                <div class="opacity-50">🌙</div>
                            </div>

                            <!-- Main Timeline Bar -->
                            <div id="timeline-bar" class="h-10 w-full rounded-lg overflow-hidden relative shadow-inner" style="background: linear-gradient(to right, rgba(239, 68, 68, 0.5) 0%, rgba(239, 68, 68, 0.5) 25%, rgba(250, 204, 21, 0.4) 29.17%, rgba(250, 204, 21, 0.4) 62.5%, rgba(239, 68, 68, 0.5) 66.67%, rgba(239, 68, 68, 0.5) 100%);">
                                 <!-- This div provides the gradient background -->
                            </div>

                            <!-- User's Eating Window Overlay -->
                            <div id="eating-window-overlay" class="absolute top-[5px] h-10 bg-accent/50 rounded-lg border-2 border-accent transition-all duration-300 ease-in-out flex items-center justify-center">
                                <span class="font-bold text-sm text-white drop-shadow-lg">Jedlo</span>
                            </div>
                            
                             <!-- Time Axis Labels -->
                            <div id="timeline-axis" class="flex justify-between mt-2 text-xs text-gray-400">
                                <span>00:00</span>
                                <span>06:00</span>
                                <span>12:00</span>
                                <span>18:00</span>
                                <span>24:00</span>
                            </div>
                        </div>
                        <div id="circadian-legend" class="mt-6 flex flex-wrap justify-center gap-x-4 gap-y-2 text-sm text-gray-300">
                             <!-- Legend items here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>


        <!-- Sekcia Pôstne Protokoly -->
        <section id="protocols" class="my-24 fade-in">
            <h2 class="text-3xl font-bold text-center mb-10">Porovnanie Pôstnych Protokolov</h2>
            <div id="protocol-cards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Karty protokolov sa vygenerujú pomocou JS -->
            </div>
        </section>

        <!-- Sekcia s detailmi protokolu (Modal/Panel) -->
        <section id="protocol-details-container" class="my-16 hidden fade-in">
             <div class="glass-effect rounded-2xl p-8 max-w-4xl mx-auto">
                <div class="flex justify-between items-start">
                    <div>
                        <h2 id="details-title" class="text-3xl font-bold highlight-text mb-2"></h2>
                        <p id="details-suitability" class="text-gray-300 mb-4"></p>
                    </div>
                    <button id="close-details" class="text-2xl text-gray-400 hover:text-white transition">&times;</button>
                </div>
                <p id="details-description" class="mb-6"></p>
                <div class="space-y-4">
                    <div>
                        <h4 class="font-semibold text-lg mb-2">Hlavné benefity:</h4>
                        <p id="details-benefits" class="text-gray-300"></p>
                    </div>
                    <div>
                        <h4 class="font-semibold text-lg mb-2">Na čo si dať pozor:</h4>
                        <p id="details-recommendations" class="text-gray-300"></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sekcia Praktická Príručka -->
        <section id="prirucka" class="my-24 fade-in">
            <h2 class="text-3xl font-bold text-center mb-10">Praktická Príručka pre Bezpečný Pôst</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto" id="guide-cards">
                <!-- Guide cards will be generated by JS -->
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="text-center py-8 mt-16 border-t border-[#1e283a]">
        <p class="text-gray-400">&copy; 2025 Sprievodca Pôstom. Vytvorené s cieľom informovať a vzdelávať.</p>
    </footer>

    <!-- Modal Structure -->
    <div id="guide-modal-backdrop" class="modal-backdrop"></div>
    <div id="guide-modal-content" class="modal-content w-11/12 max-w-2xl">
        <div class="glass-effect rounded-2xl p-8 relative">
            <button id="guide-modal-close" class="absolute top-4 right-6 text-3xl text-gray-400 hover:text-white transition">&times;</button>
            <div class="flex flex-col sm:flex-row items-center gap-6">
                <div id="guide-modal-icon-container" class="flex-shrink-0 w-20 h-20 bg-[#0e172b] rounded-full flex items-center justify-center border-2 border-accent">
                    <!-- Icon will be inserted here -->
                </div>
                <div>
                    <h3 id="guide-modal-title" class="text-2xl font-bold highlight-text mb-2"></h3>
                    <p id="guide-modal-text" class="text-gray-300"></p>
                </div>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- DATA ---
            const protocols = [
                {
                    duration: '12h',
                    title: '12-hodinový Pôst',
                    subtitle: 'Cirkadiánny Rytmus',
                    suitability: 'Ideálne pre začiatočníkov.',
                    description: 'Najmiernejšia forma prerušovaného pôstu, ktorá sa zosúlaďuje s prirodzenými dennými rytmami tela. Skvelý prvý krok.',
                    benefits: 'Zlepšenie kvality spánku, zosúladenie s cirkadiánnym rytmom, podpora trávenia.',
                    recommendations: 'Ukončite jedenie 2-3 hodiny pred spaním. Po prebudení sa hydratujte. Vhodné na každodennú prax.'
                },
                {
                    duration: '16h',
                    title: '16-hodinový Pôst',
                    subtitle: 'Metóda 16/8',
                    suitability: 'Pre začiatočníkov až stredne pokročilých.',
                    description: 'Najpopulárnejšia forma pôstu s 8-hodinovým jedálenským oknom. Udržateľná a efektívna metóda.',
                    benefits: 'Zlepšená citlivosť na inzulín, spaľovanie tukov, udržateľné chudnutie, iniciácia autofágie.',
                    recommendations: 'Posledné jedlo by malo byť bohaté na bielkoviny a vlákninu. Ranná káva alebo čaj môžu pomôcť. Ideálny čas na ľahšie cvičenie je pred prerušením pôstu.'
                },
                {
                    duration: '24h',
                    title: '24-hodinový Pôst',
                    subtitle: 'Eat-Stop-Eat',
                    suitability: 'Pre stredne pokročilých a pokročilých.',
                    description: 'Celodenný pôst, typicky od večere do večere, praktizovaný 1-2 krát týždenne. Vyžaduje mentálnu prípravu.',
                    benefits: 'Výrazné spaľovanie tukov, silná autofágia, významný nárast rastového hormónu (HGH).',
                    recommendations: 'Kľúčové je dopĺňanie elektrolytov (soľ, draslík, horčík), aby ste predišli bolestiam hlavy. Vyhnite sa intenzívnemu cvičeniu. Prerušte pôst malým a ľahkým jedlom.'
                },
                {
                    duration: '36h',
                    title: '36-hodinový Pôst',
                    subtitle: 'Mníšsky Pôst',
                    suitability: 'Len pre skúsených jedincov.',
                    description: 'Zahŕňa vynechanie jedla na celý jeden deň. Napríklad od večere v pondelok do raňajok v stredu.',
                    benefits: 'Hlboká ketóza, maximalizácia autofágie, extrémna mentálna jasnosť.',
                    recommendations: 'Suplementácia elektrolytov je nevyhnutná. Počúvajte svoje telo a v prípade extrémnej slabosti pôst prerušte. Vyžaduje sa odpočinok.'
                },
                {
                    duration: '48h',
                    title: '48-hodinový Pôst',
                    subtitle: 'Hĺbková Obnova',
                    suitability: 'Pre veľmi skúsených, ideálne po konzultácii s lekárom.',
                    description: 'Dva celé dni bez jedla. Ponúka potenciál pre regeneráciu imunitných buniek, no prináša aj riziká.',
                    benefits: 'Vrchol autofágie, potenciálna regenerácia imunitných buniek, hĺbkový reset.',
                    recommendations: 'Druhý deň je často ľahší ako prvý. Prerušenie pôstu (re-feed) musí byť veľmi opatrné – začnite napríklad kostným vývarom.'
                },
                {
                    duration: '72h',
                    title: '72-hodinový Pôst',
                    subtitle: 'Systémový Reset',
                    suitability: 'Výlučne pre expertov pod lekárskym dohľadom.',
                    description: 'Tri celé dni bez jedla. Významná fyziologická výzva s potenciálom pre regeneráciu kmeňových buniek.',
                    benefits: 'Aktivácia regenerácie kmeňových buniek, kompletný systémový reset.',
                    recommendations: 'Absolútny pokojový režim je nutnosťou. Riziká sú značné, vrátane straty svalovej hmoty a refeeding syndrómu. Vyžaduje profesionálne monitorovanie.'
                }
            ];

            const guideData = [
                {
                    title: 'Hydratácia a Elektrolyty',
                    short: 'Kľúč k úspešnému pôstu bez vedľajších účinkov.',
                    answer: 'Pite dostatok nekalorických tekutín ako voda, bylinkový čaj alebo čierna káva. Pri pôstoch nad 24 hodín je kľúčové dopĺňať elektrolyty (štipka kvalitnej soli do vody, doplnky s draslíkom a horčíkom), aby ste predišli bolestiam hlavy, únave a svalovým kŕčom.',
                    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-accent" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" /></svg>`
                },
                {
                    title: 'Pôst a Fyzický Výkon',
                    short: 'Ako strategicky spojiť cvičenie s pôstom.',
                    answer: 'Ľahká aktivita ako chôdza alebo joga je zvyčajne v poriadku. Intenzívny tréning môže byť náročný kvôli vyčerpaným zásobám glykogénu. Tréning tesne pred prerušením pôstu môže maximalizovať rast svalov vďaka zvýšenej citlivosti na inzulín.',
                    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-accent" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>`
                },
                {
                    title: 'Bezpečné Prerušenie Pôstu',
                    short: 'Najdôležitejší krok pri dlhších pôstoch.',
                    answer: 'Prerušenie dlhšieho pôstu (48h+) je kritické. Začnite pomaly a opatrne, aby ste predišli tzv. refeeding syndrómu. Prvé jedlo by malo byť malé, ľahko stráviteľné, s nízkym obsahom sacharidov. Ideálny je kostný vývar, avokádo, alebo malá porcia bielkovín so zeleninou. Vyhnite sa cukru a veľkým porciám.',
                    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-accent" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-12v4m-2-2h4m6 4v4m-2-2h4M12 3v18" /></svg>`
                },
                {
                    title: 'Pre Koho Pôst Nie Je Vhodný?',
                    short: 'Poznajte kontraindikácie a riziká.',
                    answer: 'Pôst nie je vhodný pre tehotné a dojčiace ženy, deti, osoby s podváhou (BMI < 18.5), s poruchami príjmu potravy v anamnéze, alebo s určitými zdravotnými stavmi (napr. diabetes 1. typu). Vždy sa poraďte so svojím lekárom predtým, ako začnete s akýmkoľvek pôstnym režimom.',
                    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-accent" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" /></svg>`
                }
            ];


            // --- RENDER FUNCTIONS ---
            const protocolCardsContainer = document.getElementById('protocol-cards');
            protocols.forEach((protocol, index) => {
                const card = document.createElement('div');
                card.className = 'bg-[#1e283a] p-6 rounded-2xl shadow-lg cursor-pointer transform hover:scale-105 hover:shadow-cyan-500/20 transition-all duration-300';
                card.dataset.index = index;
                card.innerHTML = `
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-2xl font-bold">${protocol.title}</h3>
                        <span class="bg-accent text-[#0e172b] text-xs font-bold px-3 py-1 rounded-full">${protocol.duration}</span>
                    </div>
                    <p class="text-gray-400 mb-1 text-sm font-medium">${protocol.subtitle}</p>
                    <p class="text-gray-300">${protocol.suitability}</p>
                `;
                protocolCardsContainer.appendChild(card);
            });

            // Render Guide Cards
            const guideCardsContainer = document.getElementById('guide-cards');
            guideData.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'bg-[#1e283a] p-6 rounded-2xl shadow-lg cursor-pointer transform hover:-translate-y-2 hover:shadow-cyan-500/20 transition-all duration-300 flex flex-col items-center text-center';
                card.dataset.index = index;
                card.innerHTML = `
                    <div class="w-16 h-16 mb-4 flex items-center justify-center">${item.icon.replace('h-10 w-10', 'h-12 w-12')}</div>
                    <h4 class="text-xl font-bold mb-2">${item.title}</h4>
                    <p class="text-gray-400 text-sm">${item.short}</p>
                `;
                guideCardsContainer.appendChild(card);
            });
            
            // --- CHART LOGIC ---
            function initCharts() {
                const ctx = document.getElementById('fastingChart');
                if (!ctx) return;

                const labels = Array.from({ length: 73 }, (_, i) => i);

                const insulinData = [100, 95, 90, 85, 80, 75, 70, 65, 60, 50, 40, 30, 20, 15, 12, 10, 8, 7, 6, 5, 5, 5, 5, 5, 5, 4, 4, 4, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3];
                const ketonesData = [0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 5, 8, 12, 16, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 84, 88, 92, 95, 98, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100];
                const autophagyData = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 4, 6, 8, 12, 16, 20, 25, 30, 35, 40, 45, 55, 65, 75, 80, 84, 88, 92, 95, 98, 99, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 99, 98, 97, 96, 95, 94, 93, 92, 91, 90, 89, 88, 87, 86, 85, 84, 83, 82, 81, 80, 79, 78, 77];
                const hghData = [5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 10, 20, 30, 50, 80, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100];
                const cortisolData = [5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100, 100, 100, 100, 100, 100];
                
                function interpolate(x1, y1, x2, y2, x) {
                    return y1 + (y2 - y1) * (x - x1) / (x2 - x1);
                }
                const fatBurningRawData = [];
                for (let i = 0; i <= 72; i++) {
                    if (i <= 4) fatBurningRawData.push(interpolate(0, 0, 4, 5, i));
                    else if (i <= 12) fatBurningRawData.push(interpolate(4, 5, 12, 20, i));
                    else if (i <= 16) fatBurningRawData.push(interpolate(12, 20, 16, 50, i));
                    else if (i <= 24) fatBurningRawData.push(interpolate(16, 50, 24, 80, i));
                    else if (i <= 48) fatBurningRawData.push(interpolate(24, 80, 48, 90, i));
                    else fatBurningRawData.push(90);
                }
                const fatBurningData = fatBurningRawData.map(v => Math.round(v));

                const dataStore = { insulinData, ketonesData, autophagyData, hghData, cortisolData, fatBurningData };

                const verticalLinePlugin = {
                    id: 'verticalLine',
                    afterDraw: chart => {
                        if (chart.tooltip?._active?.length) {
                            let x = chart.tooltip._active[0].element.x;
                            let yAxis = chart.scales.y;
                            let ctx = chart.ctx;
                            ctx.save();
                            ctx.beginPath();
                            ctx.moveTo(x, yAxis.top);
                            ctx.lineTo(x, yAxis.bottom);
                            ctx.lineWidth = 1;
                            ctx.strokeStyle = 'rgba(56, 188, 248, 0.5)';
                            ctx.stroke();
                            ctx.restore();
                        }
                    }
                };

                const chart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [
                            { label: 'Inzulín/Glukóza', data: insulinData, borderColor: '#f87171', tension: 0.4, pointRadius: 0, borderWidth: 2 },
                            { label: 'Ketóny', data: ketonesData, borderColor: '#4ade80', tension: 0.4, pointRadius: 0, borderWidth: 2 },
                            { label: 'Autofágia', data: autophagyData, borderColor: '#38bcf8', tension: 0.4, pointRadius: 0, borderWidth: 2 },
                            { label: 'HGH', data: hghData, borderColor: '#facc15', tension: 0.4, pointRadius: 0, borderWidth: 2 },
                            { label: 'Kortizol', data: cortisolData, borderColor: '#c084fc', tension: 0.4, pointRadius: 0, borderWidth: 2 },
                            { label: 'Spaľovanie Tukov', data: fatBurningData, borderColor: '#f97316', tension: 0.4, pointRadius: 0, borderWidth: 2 }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        animation: { duration: 1000, easing: 'easeInOutQuad' },
                        plugins: {
                            legend: { position: 'bottom', labels: { color: '#9ca3af', usePointStyle: true } },
                            tooltip: { mode: 'index', intersect: false, backgroundColor: '#1e283a', titleColor: '#ffffff', bodyColor: '#d1d5db', borderColor: '#38bcf8', borderWidth: 1 },
                        },
                        scales: {
                            y: { beginAtZero: true, max: 110, display: false },
                            x: { grid: { color: 'rgba(255, 255, 255, 0.05)' }, ticks: { color: '#9ca3af', maxTicksLimit: 8 } }
                        },
                        interaction: { mode: 'index', intersect: false, },
                    },
                    plugins: [verticalLinePlugin]
                });
                
                updateCards(0, dataStore);
                setupSlider(chart, dataStore);
            }

            function setupSlider(chart, dataStore) {
                 const slider = document.getElementById('hour-slider');
                 slider.addEventListener('input', (e) => {
                    const hour = parseInt(e.target.value, 10);
                    updateCards(hour, dataStore);
                    if (chart.tooltip) {
                        chart.tooltip.setActiveElements([
                            { datasetIndex: 0, index: hour }, { datasetIndex: 1, index: hour },
                            { datasetIndex: 2, index: hour }, { datasetIndex: 3, index: hour },
                            { datasetIndex: 4, index: hour }, { datasetIndex: 5, index: hour }
                        ]);
                        chart.update();
                    }
                 });
            }

            function updateCards(hour, dataStore) {
                document.getElementById('slider-value').textContent = `${hour} hodín`;
                const insulin = dataStore.insulinData[hour];
                const ketones = dataStore.ketonesData[hour];
                const autophagy = dataStore.autophagyData[hour];
                const hgh = dataStore.hghData[hour];
                const cortisol = dataStore.cortisolData[hour];
                const fatBurning = dataStore.fatBurningData[hour];

                document.getElementById('insulin-value').textContent = insulin > 70 ? 'Vysoká' : insulin > 20 ? 'Klesajúca' : 'Nízka';
                document.getElementById('ketones-value').textContent = ketones < 10 ? 'Nízka' : ketones < 60 ? 'Stredná' : 'Vysoká';
                document.getElementById('autophagy-value').textContent = autophagy < 10 ? 'Minimálna' : autophagy < 70 ? 'Aktívna' : 'Maximálna';
                document.getElementById('hgh-value').textContent = hgh < 10 ? 'Normálna' : hgh < 50 ? 'Zvýšená' : 'Vysoká';
                document.getElementById('cortisol-value').textContent = cortisol < 20 ? 'Normálna' : cortisol < 60 ? 'Zvýšená' : 'Vysoká';
                document.getElementById('fat-burning-value').textContent = fatBurning < 30 ? 'Nízke' : fatBurning < 70 ? 'Stredné' : 'Dominantné';
            }
            
            function initCircadianChart() {
                const startTimeSlider = document.getElementById('start-time-slider');
                const endTimeSlider = document.getElementById('end-time-slider');
                const startTimeLabel = document.getElementById('start-time-label');
                const endTimeLabel = document.getElementById('end-time-label');
                const durationLabel = document.getElementById('eating-window-duration');
                const eatingWindowOverlay = document.getElementById('eating-window-overlay');

                function formatTime(hour) {
                    return hour.toString().padStart(2, '0') + ':00';
                }
                
                function updateLinearTimeline() {
                    let start = parseInt(startTimeSlider.value);
                    let end = parseInt(endTimeSlider.value);

                     if (start >= end) {
                        if (end > 0) {
                            start = end - 1;
                        } else {
                            start = 23;
                        }
                        startTimeSlider.value = start;
                    }
                    
                    startTimeLabel.textContent = formatTime(start);
                    endTimeLabel.textContent = formatTime(end);
                    
                    let eatingDuration = end - start;
                    if (eatingDuration <= 0) eatingDuration = 1;
                    
                    durationLabel.textContent = `${eatingDuration} hod.`;

                    const startPercent = (start / 24) * 100;
                    const widthPercent = (eatingDuration / 24) * 100;

                    eatingWindowOverlay.style.left = `${startPercent}%`;
                    eatingWindowOverlay.style.width = `${widthPercent}%`;
                }
                
                const legendContainer = document.getElementById('circadian-legend');
                const legendData = [
                    { label: 'Optimálna zóna', color: 'rgba(250, 204, 21, 0.7)' },
                    { label: 'Menej optimálna zóna', color: 'rgba(239, 68, 68, 0.7)' },
                    { label: 'Vaše jedlo', color: 'rgba(56, 188, 248, 0.7)' }
                ];

                legendContainer.innerHTML = '';
                legendData.forEach(item => {
                    const legendItem = document.createElement('div');
                    legendItem.className = 'flex items-center';
                    legendItem.innerHTML = `<span class="w-3 h-3 rounded-full mr-2" style="background-color: ${item.color}; border: 1px solid ${item.color === 'rgba(56, 188, 248, 0.7)' ? '#fff' : 'transparent'}"></span><span>${item.label}</span>`;
                    legendContainer.appendChild(legendItem);
                });

                startTimeSlider.addEventListener('input', updateLinearTimeline);
                endTimeSlider.addEventListener('input', updateLinearTimeline);
                updateLinearTimeline();
            }

            initCharts();
            initCircadianChart();

            // --- EVENT LISTENERS ---

            // Mobile Menu Toggle
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const menuOpenIcon = document.getElementById('menu-open-icon');
            const menuCloseIcon = document.getElementById('menu-close-icon');

            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
                menuOpenIcon.classList.toggle('hidden');
                menuCloseIcon.classList.toggle('hidden');
                // Optional: add a border when menu is open
                mobileMenu.parentElement.querySelector('div').parentElement.classList.toggle('border-b');
                mobileMenu.parentElement.querySelector('div').parentElement.classList.toggle('border-accent/20');

            });

            // Close mobile menu when a link is clicked
            mobileMenu.addEventListener('click', (e) => {
                if (e.target.tagName === 'A') {
                    mobileMenu.classList.add('hidden');
                    menuOpenIcon.classList.remove('hidden');
                    menuCloseIcon.classList.add('hidden');
                }
            });
            
            // Protocol Details Logic
            const detailsContainer = document.getElementById('protocol-details-container');
            const closeDetailsBtn = document.getElementById('close-details');
            protocolCardsContainer.addEventListener('click', (e) => {
                const card = e.target.closest('div[data-index]');
                if (card) {
                    const protocol = protocols[card.dataset.index];
                    document.getElementById('details-title').textContent = protocol.title;
                    document.getElementById('details-suitability').textContent = protocol.suitability;
                    document.getElementById('details-description').textContent = protocol.description;
                    document.getElementById('details-benefits').textContent = protocol.benefits;
                    document.getElementById('details-recommendations').textContent = protocol.recommendations;
                    detailsContainer.classList.remove('hidden');
                    setTimeout(() => {
                        detailsContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 100);
                }
            });
            closeDetailsBtn.addEventListener('click', () => {
                detailsContainer.classList.add('hidden');
            });

            // Guide Modal Logic
            const guideModalBackdrop = document.getElementById('guide-modal-backdrop');
            const guideModalContent = document.getElementById('guide-modal-content');
            const guideModalCloseBtn = document.getElementById('guide-modal-close');
            
            function openGuideModal(index) {
                const item = guideData[index];
                document.getElementById('guide-modal-icon-container').innerHTML = item.icon;
                document.getElementById('guide-modal-title').textContent = item.title;
                document.getElementById('guide-modal-text').textContent = item.answer;
                document.body.classList.add('modal-open');
                guideModalBackdrop.classList.add('visible');
                guideModalContent.classList.add('visible');
            }

            function closeGuideModal() {
                document.body.classList.remove('modal-open');
                guideModalBackdrop.classList.remove('visible');
                guideModalContent.classList.remove('visible');
            }

            guideCardsContainer.addEventListener('click', (e) => {
                const card = e.target.closest('div[data-index]');
                if (card) {
                    openGuideModal(card.dataset.index);
                }
            });

            guideModalCloseBtn.addEventListener('click', closeGuideModal);
            guideModalBackdrop.addEventListener('click', closeGuideModal);

            // Fade-in Animation on Scroll
            const fadeInElements = document.querySelectorAll('.fade-in');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            fadeInElements.forEach(el => {
                observer.observe(el);
            });
            document.querySelector('header.fade-in').classList.add('visible');
        });
    </script>
</body>
</html>

