<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sprievodca P√¥stom | Interakt√≠vna Anal√Ωza</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0e172b;
            color: #ffffff;
        }
        .glass-effect {
            background: rgba(30, 40, 58, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(56, 188, 248, 0.1);
        }
        .highlight-text {
            color: #38bcf8;
        }
        .bg-accent {
            background-color: #38bcf8;
        }
        .border-accent {
            border-color: #38bcf8;
        }
        .scroll-smooth {
            scroll-behavior: smooth;
        }
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        /* Custom slider styles */
        input[type=range] {
            -webkit-appearance: none;
            width: 100%;
            background: transparent;
        }
        input[type=range]:focus {
            outline: none;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 8px; /* Zv√§ƒç≈°en√° v√Ω≈°ka pre lep≈°iu viditeƒænos≈• */
            cursor: pointer;
            background: #2a384e; /* Mierne svetlej≈°ie pozadie */
            border-radius: 5px;
            border: 1px solid rgba(56, 188, 248, 0.5); /* Jemn√Ω okraj vo farbe zv√Ωraznenia */
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 24px;
            width: 24px;
            border-radius: 50%;
            background: #38bcf8;
            cursor: pointer;
            margin-top: -8px; /* Upraven√° poz√≠cia pre centrovanie na novej li≈°te */
            border: 4px solid #0e172b;
        }
        input[type=range]::-moz-range-track {
            width: 100%;
            height: 8px; /* Zv√§ƒç≈°en√° v√Ω≈°ka pre lep≈°iu viditeƒænos≈• */
            cursor: pointer;
            background: #2a384e; /* Mierne svetlej≈°ie pozadie */
            border-radius: 5px;
            border: 1px solid rgba(56, 188, 248, 0.5); /* Jemn√Ω okraj vo farbe zv√Ωraznenia */
        }
        input[type=range]::-moz-range-thumb {
            height: 24px;
            width: 24px;
            border-radius: 50%;
            background: #38bcf8;
            cursor: pointer;
            border: 4px solid #0e172b;
        }
    </style>
</head>
<body class="scroll-smooth">

    <!-- Header -->
    <header class="container mx-auto px-6 py-12 text-center fade-in">
        <h1 class="text-4xl md:text-6xl font-bold mb-4">
            Sprievodca Svetom <span class="highlight-text">P√¥stu</span>
        </h1>
        <p class="text-lg md:text-xl text-gray-300 max-w-3xl mx-auto">
            Objavte silu metabolickej flexibility a bunkovej obnovy. Interakt√≠vny prehƒæad p√¥stnych protokolov od 12 do 72 hod√≠n, zalo≈æen√Ω na vedeck√Ωch poznatkoch.
        </p>
    </header>

    <main class="container mx-auto px-6">

        <!-- Sekcia Metabolick√° Cesta -->
        <section class="my-16 fade-in">
            <h2 class="text-3xl font-bold text-center mb-10">Metabolick√° Cesta Telom Poƒças P√¥stu</h2>
            <div class="relative w-full max-w-5xl mx-auto">
                <!-- Timeline Line -->
                <div class="absolute left-4 top-4 bottom-4 w-1 bg-[#1e283a] rounded-full"></div>
                
                <!-- Timeline Items -->
                <div class="space-y-12">
                    <!-- 0-12 Hod√≠n -->
                    <div class="relative flex items-center">
                        <div class="w-full ml-12">
                            <div class="bg-[#1e283a] p-6 rounded-xl shadow-lg border border-transparent hover:border-accent transition-all duration-300">
                                <p class="text-sm font-semibold highlight-text mb-1">0-12 Hod√≠n</p>
                                <h3 class="text-xl font-bold mb-2">Prechod do Katabolizmu</h3>
                                <p class="text-gray-300 text-sm">Telo spotreb√∫va gluk√≥zu z posledn√©ho jedla. Hladina inzul√≠nu kles√°, ƒço je sign√°l pre telo, aby zaƒçalo siaha≈• po ulo≈æen√Ωch z√°sob√°ch energie.</p>
                            </div>
                        </div>
                        <div class="absolute left-4 w-8 h-8 bg-[#0e172b] border-4 border-accent rounded-full flex items-center justify-center">
                            <div class="w-2 h-2 bg-accent rounded-full"></div>
                        </div>
                    </div>
                    <!-- 12-24 Hod√≠n -->
                    <div class="relative flex items-center">
                        <div class="w-full ml-12">
                             <div class="bg-[#1e283a] p-6 rounded-xl shadow-lg border border-transparent hover:border-accent transition-all duration-300">
                                <p class="text-sm font-semibold highlight-text mb-1">12-24 Hod√≠n</p>
                                <h3 class="text-xl font-bold mb-2">Metabolick√Ω Prep√≠naƒç</h3>
                                <p class="text-gray-300 text-sm">Z√°soby glykog√©nu sa vyƒçerp√°vaj√∫. Telo zaƒç√≠na produkova≈• ket√≥ny ako alternat√≠vne palivo a sp√∫≈°≈•a sa proces autof√°gie - bunkov√©ho ƒçistenia.</p>
                            </div>
                        </div>
                        <div class="absolute left-4 w-8 h-8 bg-[#0e172b] border-4 border-accent rounded-full flex items-center justify-center">
                            <div class="w-2 h-2 bg-accent rounded-full"></div>
                        </div>
                    </div>
                    <!-- 24-48 Hod√≠n -->
                    <div class="relative flex items-center">
                        <div class="w-full ml-12">
                             <div class="bg-[#1e283a] p-6 rounded-xl shadow-lg border border-transparent hover:border-accent transition-all duration-300">
                                <p class="text-sm font-semibold highlight-text mb-1">24-48 Hod√≠n</p>
                                <h3 class="text-xl font-bold mb-2">Hlbok√Ω P√¥st</h3>
                                <p class="text-gray-300 text-sm">Telo je v hlbokej ket√≥ze. V√Ωrazne st√∫pa hladina rastov√©ho horm√≥nu (HGH) a maximalizuje sa autof√°gia, ƒço vedie k intenz√≠vnej bunkovej oprave.</p>
                            </div>
                        </div>
                        <div class="absolute left-4 w-8 h-8 bg-[#0e172b] border-4 border-accent rounded-full flex items-center justify-center">
                            <div class="w-2 h-2 bg-accent rounded-full"></div>
                        </div>
                    </div>
                    <!-- 48-72 Hod√≠n -->
                    <div class="relative flex items-center">
                        <div class="w-full ml-12">
                             <div class="bg-[#1e283a] p-6 rounded-xl shadow-lg border border-transparent hover:border-accent transition-all duration-300">
                                <p class="text-sm font-semibold highlight-text mb-1">48-72 Hod√≠n</p>
                                <h3 class="text-xl font-bold mb-2">Syst√©mov√Ω Reset</h3>
                                <p class="text-gray-300 text-sm">Doch√°dza k regener√°cii imunitn√Ωch buniek a kme≈àov√Ωch buniek. Toto ≈°t√°dium pon√∫ka hƒ∫bkov√© benefity, no vy≈æaduje si sk√∫senosti a opatrnos≈•.</p>
                            </div>
                        </div>
                        <div class="absolute left-4 w-8 h-8 bg-[#0e172b] border-4 border-accent rounded-full flex items-center justify-center">
                            <div class="w-2 h-2 bg-accent rounded-full"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sekcia Grafy -->
        <section class="my-24 fade-in">
            <h2 class="text-3xl font-bold text-center mb-4">Vizualiz√°cia Priebehu P√¥stu</h2>
            <p class="text-center text-gray-400 mb-10">Posu≈àte a sledujte, ako sa menia kƒæ√∫ƒçov√© ukazovatele v priebehu 72 hod√≠n.</p>
            
            <div class="bg-[#1e283a] p-6 md:p-8 rounded-2xl shadow-lg">
                <!-- Slider -->
                <div class="mb-8">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-gray-400 text-sm">Zaƒçiatok P√¥stu</span>
                        <span id="slider-value" class="text-xl font-bold highlight-text">0 hod√≠n</span>
                        <span class="text-gray-400 text-sm">72 hod√≠n</span>
                    </div>
                    <input type="range" id="hour-slider" min="0" max="72" value="0" step="1">
                </div>

                <!-- Value Cards -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                    <div class="bg-[#0e172b] p-4 rounded-lg text-center">
                        <p class="text-sm text-gray-400">Inzul√≠n / Gluk√≥za</p>
                        <p id="insulin-value" class="text-2xl font-bold">Vysok√°</p>
                    </div>
                     <div class="bg-[#0e172b] p-4 rounded-lg text-center">
                        <p class="text-sm text-gray-400">Ket√≥ny</p>
                        <p id="ketones-value" class="text-2xl font-bold">N√≠zka</p>
                    </div>
                     <div class="bg-[#0e172b] p-4 rounded-lg text-center">
                        <p class="text-sm text-gray-400">Autof√°gia</p>
                        <p id="autophagy-value" class="text-2xl font-bold">Minim√°lna</p>
                    </div>
                     <div class="bg-[#0e172b] p-4 rounded-lg text-center">
                        <p class="text-sm text-gray-400">Rastov√Ω Horm√≥n</p>
                        <p id="hgh-value" class="text-2xl font-bold">Norm√°lna</p>
                    </div>
                </div>

                <!-- Chart -->
                <div class="relative h-64 md:h-96">
                    <canvas id="fastingChart"></canvas>
                </div>
            </div>
        </section>


        <!-- Sekcia P√¥stne Protokoly -->
        <section class="my-24 fade-in" id="protocols">
            <h2 class="text-3xl font-bold text-center mb-10">Porovnanie P√¥stnych Protokolov</h2>
            <div id="protocol-cards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Karty protokolov sa vygeneruj√∫ pomocou JS -->
            </div>
        </section>

        <!-- Sekcia s detailmi protokolu (Modal/Panel) -->
        <section id="protocol-details-container" class="my-16 hidden fade-in">
             <div class="glass-effect rounded-2xl p-8 max-w-4xl mx-auto">
                <div class="flex justify-between items-start">
                    <div>
                        <h2 id="details-title" class="text-3xl font-bold highlight-text mb-2"></h2>
                        <p id="details-suitability" class="text-gray-300 mb-4"></p>
                    </div>
                    <button id="close-details" class="text-2xl text-gray-400 hover:text-white transition">&times;</button>
                </div>
                <p id="details-description" class="mb-6"></p>
                <div class="space-y-4">
                    <div>
                        <h4 class="font-semibold text-lg mb-2">Hlavn√© benefity:</h4>
                        <p id="details-benefits" class="text-gray-300"></p>
                    </div>
                    <div>
                        <h4 class="font-semibold text-lg mb-2">Na ƒço si da≈• pozor:</h4>
                        <p id="details-recommendations" class="text-gray-300"></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sekcia Praktick√° Pr√≠ruƒçka -->
        <section class="my-24 fade-in">
            <h2 class="text-3xl font-bold text-center mb-10">Praktick√° Pr√≠ruƒçka pre Bezpeƒçn√Ω P√¥st</h2>
            <div class="max-w-3xl mx-auto space-y-4" id="faq-accordion">
                <!-- Accordion Items sa vygeneruj√∫ pomocou JS -->
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="text-center py-8 mt-16 border-t border-[#1e283a]">
        <p class="text-gray-400">&copy; 2025 Sprievodca P√¥stom. Vytvoren√© s cieƒæom informova≈• a vzdel√°va≈•.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- DATA ---
            const protocols = [
                {
                    duration: '12h',
                    title: '12-hodinov√Ω P√¥st',
                    subtitle: 'Cirkadi√°nny Rytmus',
                    suitability: 'Ide√°lne pre zaƒçiatoƒçn√≠kov.',
                    description: 'Najmiernej≈°ia forma preru≈°ovan√©ho p√¥stu, ktor√° sa zos√∫laƒèuje s prirodzen√Ωmi denn√Ωmi rytmami tela. Skvel√Ω prv√Ω krok.',
                    benefits: 'Zlep≈°enie kvality sp√°nku, zos√∫ladenie s cirkadi√°nnym rytmom, podpora tr√°venia.',
                    recommendations: 'Ukonƒçite jedenie 2-3 hodiny pred span√≠m. Po prebuden√≠ sa hydratujte. Vhodn√© na ka≈ædodenn√∫ prax.'
                },
                {
                    duration: '16h',
                    title: '16-hodinov√Ω P√¥st',
                    subtitle: 'Met√≥da 16/8',
                    suitability: 'Pre zaƒçiatoƒçn√≠kov a≈æ stredne pokroƒçil√Ωch.',
                    description: 'Najpopul√°rnej≈°ia forma p√¥stu s 8-hodinov√Ωm jed√°lensk√Ωm oknom. Udr≈æateƒæn√° a efekt√≠vna met√≥da.',
                    benefits: 'Zlep≈°en√° citlivos≈• na inzul√≠n, spaƒæovanie tukov, udr≈æateƒæn√© chudnutie, inici√°cia autof√°gie.',
                    recommendations: 'Posledn√© jedlo by malo by≈• bohat√© na bielkoviny a vl√°kninu. Rann√° k√°va alebo ƒçaj m√¥≈æu pom√¥c≈•. Ide√°lny ƒças na ƒæah≈°ie cviƒçenie je pred preru≈°en√≠m p√¥stu.'
                },
                {
                    duration: '24h',
                    title: '24-hodinov√Ω P√¥st',
                    subtitle: 'Eat-Stop-Eat',
                    suitability: 'Pre stredne pokroƒçil√Ωch a pokroƒçil√Ωch.',
                    description: 'Celodenn√Ω p√¥st, typicky od veƒçere do veƒçere, praktizovan√Ω 1-2 kr√°t t√Ω≈ædenne. Vy≈æaduje ment√°lnu pr√≠pravu.',
                    benefits: 'V√Ωrazn√© spaƒæovanie tukov, siln√° autof√°gia, v√Ωznamn√Ω n√°rast rastov√©ho horm√≥nu (HGH).',
                    recommendations: 'Kƒæ√∫ƒçov√© je dopƒ∫≈àanie elektrolytov (soƒæ, drasl√≠k, horƒç√≠k), aby ste predi≈°li bolestiam hlavy. Vyhnite sa intenz√≠vnemu cviƒçeniu. Preru≈°te p√¥st mal√Ωm a ƒæahk√Ωm jedlom.'
                },
                {
                    duration: '36h',
                    title: '36-hodinov√Ω P√¥st',
                    subtitle: 'Mn√≠≈°sky P√¥st',
                    suitability: 'Len pre sk√∫sen√Ωch jedincov.',
                    description: 'Zah≈ï≈àa vynechanie jedla na cel√Ω jeden de≈à. Napr√≠klad od veƒçere v pondelok do ra≈àajok v stredu.',
                    benefits: 'Hlbok√° ket√≥za, maximaliz√°cia autof√°gie, extr√©mna ment√°lna jasnos≈•.',
                    recommendations: 'Suplement√°cia elektrolytov je nevyhnutn√°. Poƒç√∫vajte svoje telo a v pr√≠pade extr√©mnej slabosti p√¥st preru≈°te. Vy≈æaduje sa odpoƒçinok.'
                },
                {
                    duration: '48h',
                    title: '48-hodinov√Ω P√¥st',
                    subtitle: 'Hƒ∫bkov√° Obnova',
                    suitability: 'Pre veƒæmi sk√∫sen√Ωch, ide√°lne po konzult√°cii s lek√°rom.',
                    description: 'Dva cel√© dni bez jedla. Pon√∫ka potenci√°l pre regener√°ciu imunitn√Ωch buniek, no prin√°≈°a aj rizik√°.',
                    benefits: 'Vrchol autof√°gie, potenci√°lna regener√°cia imunitn√Ωch buniek, hƒ∫bkov√Ω reset.',
                    recommendations: 'Druh√Ω de≈à je ƒçasto ƒæah≈°√≠ ako prv√Ω. Preru≈°enie p√¥stu (re-feed) mus√≠ by≈• veƒæmi opatrn√© ‚Äì zaƒçnite napr√≠klad kostn√Ωm v√Ωvarom.'
                },
                {
                    duration: '72h',
                    title: '72-hodinov√Ω P√¥st',
                    subtitle: 'Syst√©mov√Ω Reset',
                    suitability: 'V√Ωluƒçne pre expertov pod lek√°rskym dohƒæadom.',
                    description: 'Tri cel√© dni bez jedla. V√Ωznamn√° fyziologick√° v√Ωzva s potenci√°lom pre regener√°ciu kme≈àov√Ωch buniek.',
                    benefits: 'Aktiv√°cia regener√°cie kme≈àov√Ωch buniek, kompletn√Ω syst√©mov√Ω reset.',
                    recommendations: 'Absol√∫tny pokojov√Ω re≈æim je nutnos≈•ou. Rizik√° s√∫ znaƒçn√©, vr√°tane straty svalovej hmoty a refeeding syndr√≥mu. Vy≈æaduje profesion√°lne monitorovanie.'
                }
            ];

            const faqData = [
                {
                    question: 'üíß Hydrat√°cia a Elektrolyty',
                    answer: 'Pite dostatok nekalorick√Ωch tekut√≠n ako voda, bylinkov√Ω ƒçaj alebo ƒçierna k√°va. Pri p√¥stoch nad 24 hod√≠n je kƒæ√∫ƒçov√© dopƒ∫≈àa≈• elektrolyty (≈°tipka kvalitnej soli do vody, doplnky s drasl√≠kom a horƒç√≠kom), aby ste predi≈°li bolestiam hlavy, √∫nave a svalov√Ωm k≈ïƒçom.'
                },
                {
                    question: 'üèãÔ∏è P√¥st a Fyzick√Ω V√Ωkon',
                    answer: 'ƒΩahk√° aktivita ako ch√¥dza alebo joga je zvyƒçajne v poriadku. Intenz√≠vny tr√©ning m√¥≈æe by≈• n√°roƒçn√Ω kv√¥li vyƒçerpan√Ωm z√°sob√°m glykog√©nu. Tr√©ning tesne pred preru≈°en√≠m p√¥stu m√¥≈æe maximalizova≈• rast svalov vƒèaka zv√Ω≈°enej citlivosti na inzul√≠n.'
                },
                {
                    question: 'üç≤ Ako Bezpeƒçne Preru≈°i≈• P√¥st (Re-feed)',
                    answer: 'Preru≈°enie dlh≈°ieho p√¥stu (48h+) je kritick√©. Zaƒçnite pomaly a opatrne. Prv√© jedlo by malo by≈• mal√©, ƒæahko str√°viteƒæn√©, s n√≠zkym obsahom sacharidov. Ide√°lny je kostn√Ω v√Ωvar, avok√°do, alebo mal√° porcia bielkov√≠n so zeleninou. Vyhnite sa cukru a veƒæk√Ωm porci√°m.'
                },
                {
                    question: '‚ö†Ô∏è Pre Koho P√¥st Nie Je Vhodn√Ω?',
                    answer: 'P√¥st nie je vhodn√Ω pre tehotn√© a dojƒçiace ≈æeny, deti, osoby s podv√°hou (BMI < 18.5), s poruchami pr√≠jmu potravy v anamn√©ze, alebo s urƒçit√Ωmi zdravotn√Ωmi stavmi (napr. diabetes 1. typu). V≈ædy sa poraƒète so svoj√≠m lek√°rom predt√Ωm, ako zaƒçnete s ak√Ωmkoƒævek p√¥stnym re≈æimom.'
                }
            ];

            // --- RENDER FUNCTIONS ---
            const protocolCardsContainer = document.getElementById('protocol-cards');
            protocols.forEach((protocol, index) => {
                const card = document.createElement('div');
                card.className = 'bg-[#1e283a] p-6 rounded-2xl shadow-lg cursor-pointer transform hover:scale-105 hover:shadow-cyan-500/20 transition-all duration-300';
                card.dataset.index = index;
                card.innerHTML = `
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-2xl font-bold">${protocol.title}</h3>
                        <span class="bg-accent text-[#0e172b] text-xs font-bold px-3 py-1 rounded-full">${protocol.duration}</span>
                    </div>
                    <p class="text-gray-400 mb-1 text-sm font-medium">${protocol.subtitle}</p>
                    <p class="text-gray-300">${protocol.suitability}</p>
                `;
                protocolCardsContainer.appendChild(card);
            });

            const accordionContainer = document.getElementById('faq-accordion');
            faqData.forEach(item => {
                const accordionItem = document.createElement('div');
                accordionItem.className = 'bg-[#1e283a] rounded-xl overflow-hidden';
                accordionItem.innerHTML = `
                    <button class="w-full text-left p-4 flex justify-between items-center hover:bg-[#2a384e] transition">
                        <span class="font-semibold">${item.question}</span>
                        <span class="transform transition-transform duration-300 text-accent">&#9660;</span>
                    </button>
                    <div class="px-4 pb-0 max-h-0 overflow-hidden transition-all duration-500 ease-in-out">
                        <p class="text-gray-300 py-4 border-t border-gray-700">${item.answer}</p>
                    </div>
                `;
                accordionContainer.appendChild(accordionItem);
            });
            
            // --- CHART LOGIC ---
            function initCharts() {
                const ctx = document.getElementById('fastingChart');
                if (!ctx) return;

                const labels = Array.from({ length: 73 }, (_, i) => i);

                // Approximated data based on the document
                const insulinData = [100, 95, 90, 85, 80, 75, 70, 65, 60, 50, 40, 30, 20, 15, 12, 10, 8, 7, 6, 5, 5, 5, 5, 5, 5, 4, 4, 4, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3];
                const ketonesData = [0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 5, 8, 12, 16, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 84, 88, 92, 95, 98, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100];
                const autophagyData = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 4, 6, 8, 12, 16, 20, 25, 30, 35, 40, 45, 55, 65, 75, 80, 84, 88, 92, 95, 98, 99, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 99, 98, 97, 96, 95, 94, 93, 92, 91, 90, 89, 88, 87, 86, 85, 84, 83, 82, 81, 80, 79, 78, 77];
                const hghData = [5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 10, 20, 30, 50, 80, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100];
                
                const dataStore = { insulinData, ketonesData, autophagyData, hghData };

                const verticalLinePlugin = {
                    id: 'verticalLine',
                    afterDraw: chart => {
                        if (chart.tooltip?._active?.length) {
                            let x = chart.tooltip._active[0].element.x;
                            let yAxis = chart.scales.y;
                            let ctx = chart.ctx;
                            ctx.save();
                            ctx.beginPath();
                            ctx.moveTo(x, yAxis.top);
                            ctx.lineTo(x, yAxis.bottom);
                            ctx.lineWidth = 1;
                            ctx.strokeStyle = 'rgba(56, 188, 248, 0.5)';
                            ctx.stroke();
                            ctx.restore();
                        }
                    }
                };

                const chart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [
                            {
                                label: 'Inzul√≠n/Gluk√≥za',
                                data: insulinData,
                                borderColor: '#f87171',
                                tension: 0.4,
                                pointRadius: 0,
                                borderWidth: 2,
                            },
                            {
                                label: 'Ket√≥ny',
                                data: ketonesData,
                                borderColor: '#4ade80',
                                tension: 0.4,
                                pointRadius: 0,
                                borderWidth: 2,
                            },
                            {
                                label: 'Autof√°gia',
                                data: autophagyData,
                                borderColor: '#38bcf8',
                                tension: 0.4,
                                pointRadius: 0,
                                borderWidth: 2,
                            },
                            {
                                label: 'HGH',
                                data: hghData,
                                borderColor: '#facc15',
                                tension: 0.4,
                                pointRadius: 0,
                                borderWidth: 2,
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        animation: {
                           duration: 1000,
                           easing: 'easeInOutQuad'
                        },
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    color: '#9ca3af',
                                    usePointStyle: true,
                                }
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                backgroundColor: '#1e283a',
                                titleColor: '#ffffff',
                                bodyColor: '#d1d5db',
                                borderColor: '#38bcf8',
                                borderWidth: 1,
                            },
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 110,
                                display: false
                            },
                            x: {
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.05)'
                                },
                                ticks: {
                                    color: '#9ca3af',
                                    maxTicksLimit: 8
                                }
                            }
                        },
                        interaction: {
                            mode: 'index',
                            intersect: false,
                        },
                    },
                    plugins: [verticalLinePlugin]
                });
                
                updateCards(0, dataStore);
                setupSlider(chart, dataStore);
            }

            function setupSlider(chart, dataStore) {
                 const slider = document.getElementById('hour-slider');
                 slider.addEventListener('input', (e) => {
                    const hour = parseInt(e.target.value, 10);
                    updateCards(hour, dataStore);
                    
                    // Update tooltip position
                    if (chart.tooltip) {
                        const chartArea = chart.chartArea;
                        chart.tooltip.setActiveElements([
                            { datasetIndex: 0, index: hour },
                            { datasetIndex: 1, index: hour },
                            { datasetIndex: 2, index: hour },
                            { datasetIndex: 3, index: hour }
                        ], {
                            x: chart.scales.x.getPixelForValue(hour),
                            y: (chartArea.top + chartArea.bottom) / 2,
                        });
                        chart.update();
                    }
                 });
            }

            function updateCards(hour, dataStore) {
                document.getElementById('slider-value').textContent = `${hour} hod√≠n`;
                
                const insulin = dataStore.insulinData[hour];
                const ketones = dataStore.ketonesData[hour];
                const autophagy = dataStore.autophagyData[hour];
                const hgh = dataStore.hghData[hour];

                document.getElementById('insulin-value').textContent = insulin > 70 ? 'Vysok√°' : insulin > 20 ? 'Klesaj√∫ca' : 'N√≠zka';
                document.getElementById('ketones-value').textContent = ketones < 10 ? 'N√≠zka' : ketones < 60 ? 'Stredn√°' : 'Vysok√°';
                document.getElementById('autophagy-value').textContent = autophagy < 10 ? 'Minim√°lna' : autophagy < 70 ? 'Akt√≠vna' : 'Maxim√°lna';
                document.getElementById('hgh-value').textContent = hgh < 10 ? 'Norm√°lna' : hgh < 50 ? 'Zv√Ω≈°en√°' : 'Vysok√°';
            }

            initCharts();


            // --- EVENT LISTENERS ---
            
            // Protocol Details Logic
            const detailsContainer = document.getElementById('protocol-details-container');
            const detailsTitle = document.getElementById('details-title');
            const detailsSuitability = document.getElementById('details-suitability');
            const detailsDescription = document.getElementById('details-description');
            const detailsBenefits = document.getElementById('details-benefits');
            const detailsRecommendations = document.getElementById('details-recommendations');
            const closeDetailsBtn = document.getElementById('close-details');
            
            protocolCardsContainer.addEventListener('click', (e) => {
                const card = e.target.closest('div[data-index]');
                if (card) {
                    const protocol = protocols[card.dataset.index];
                    detailsTitle.textContent = protocol.title;
                    detailsSuitability.textContent = protocol.suitability;
                    detailsDescription.textContent = protocol.description;
                    detailsBenefits.textContent = protocol.benefits;
                    detailsRecommendations.textContent = protocol.recommendations;
                    
                    detailsContainer.classList.remove('hidden');
                    setTimeout(() => {
                        detailsContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }, 100);
                }
            });

            closeDetailsBtn.addEventListener('click', () => {
                detailsContainer.classList.add('hidden');
            });

            // Accordion Logic
            accordionContainer.addEventListener('click', (e) => {
                const button = e.target.closest('button');
                if (button) {
                    const content = button.nextElementSibling;
                    const icon = button.querySelector('span:last-child');
                    
                    const isOpening = !content.style.maxHeight;
                    
                    // Close all other items before opening the new one
                    accordionContainer.querySelectorAll('.px-4.pb-0').forEach(el => {
                        el.style.maxHeight = null;
                        el.previousElementSibling.querySelector('span:last-child').style.transform = 'rotate(0deg)';
                    });

                    if (isOpening) {
                        content.style.maxHeight = content.scrollHeight + "px";
                        icon.style.transform = 'rotate(180deg)';
                    }
                }
            });

            // Fade-in Animation on Scroll
            const fadeInElements = document.querySelectorAll('.fade-in');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            fadeInElements.forEach(el => {
                observer.observe(el);
            });
            // Immediately make the header visible on load
            document.querySelector('header.fade-in').classList.add('visible');
        });
    </script>
</body>
</html>

